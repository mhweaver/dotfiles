if !exists("vimrc_level")
	let vimrc_level="base"
endif
function! BuildYCM(info)
  " info is a dictionary with 3 fields
  " - name:   name of the plugin
  " - status: 'installed', 'updated', or 'unchanged'
  " - force:  set on PlugInstall! or PlugUpdate!
  if a:info.status == 'installed' || a:info.force
    !./install.py
  endif
endfunction


call plug#begin()

Plug 'sjl/gundo.vim'
Plug 'tpope/vim-fugitive'
"Plug 'ctrlpvim/ctrlp.vim'
Plug 'mhinz/vim-signify'
Plug 'junegunn/seoul256.vim'
Plug 'tpope/vim-sensible'
Plug 'vim-scripts/taglist.vim'
Plug 'fatih/vim-go'
Plug 'altercation/vim-colors-solarized'
Plug 'Shougo/vimproc.vim', {'do' : 'make'}

if (vimrc_level == "full")
	Plug 'Valloric/YouCompleteMe', { 'do': function('BuildYCM') }
	Plug 'eagletmt/neco-ghc'
endif

call plug#end()


"General code formating options
set linebreak
set nu
set autoindent
set breakindent
set hlsearch
set incsearch
set tabstop=4
set softtabstop=4
set shiftwidth=4
set shiftround
set emoji
autocmd FileType * set noexpandtab
autocmd FileType haskell set expandtab
"
" Disable haskell-vim omnifunc
let g:haskellmode_completion_ghc = 0
autocmd FileType haskell setlocal omnifunc=necoghc#omnifunc

set hidden
"Enable syntax hightlighting

syntax on

"Make command line two lines high
set ch=2
"Hide the mouse when typing text
set mousehide

"Set up relative line numbers"
"set number relativenumber"
"autocmd InsertEnter * :set number norelativenumber"
"autocmd InsertLeave * :set number relativenumber"

"Enable powerline
set laststatus=2 "Needed to show the status line
set showtabline=2 "Needed to show the tabline
set t_Co=256 "Colors!
set rtp+=~/dotfiles/.extern/powerline/powerline/bindings/vim
"python from powerline.vim import setup as powerline_setup
"python powerline_setup()
"python del powerline_setup

set splitbelow
set splitright

"Post plugin initialization stuff
function! OnEnter()
"Gundo
	if exists(':GundoToggle')
		nnoremap <F5> :GundoToggle<CR>
	else
		echo 'Gundo is not installed (you might need to do :PlugInstall)'
	endif
endfunction

"let g:ctrlp_map = '<c-p>'
"let g:ctrlp_cmd = 'CtrlP'

let g:signify_vcs_list = ['git', 'svn']

"Seoul background color. Range: 233 (darkest) - 239 (lightest)
let g:seoul256_background = 234
colorscheme seoul256
"set background=dark
"colorscheme solarized

"Make CSVs readable
function CsvTable()
	:%!csvcol || sed -e 's/,/, /g' | column -ts ','
	:set nowrap
endfunction
command CsvT exec CsvTable()

"Enable auto-complete for haskell in YCM
let g:ycm_semantic_triggers = {'haskell' : ['.']}

autocmd VimEnter * :call OnEnter()
